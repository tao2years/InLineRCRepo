<rating>Positive</rating>
<feedback></feedback>
<events>
User edited "crates/project/src/lsp_store.rs":
```diff
@@ -1878,6 +1878,7 @@
         let Some(file) = File::from_dyn(buffer.file()) else {
             return;
         };
+        dbg!("registering")
         if !file.is_local() {
             return;
         }

```

User edited "crates/project/src/lsp_store.rs":
```diff
@@ -1878,7 +1878,7 @@
         let Some(file) = File::from_dyn(buffer.file()) else {
             return;
         };
-        dbg!("registering")
+        dbg!("registering", file.
         if !file.is_local() {
             return;
         }

```

User edited "crates/project/src/lsp_store.rs":
```diff
@@ -1878,7 +1878,7 @@
         let Some(file) = File::from_dyn(buffer.file()) else {
             return;
         };
-        dbg!("registering", file.
+        dbg!("registering", file
         if !file.is_local() {
             return;
         }

```
</events>
<input>
```crates/project/src/lsp_store.rs
        buffer.update(cx, |buffer, cx| {
            buffer.update_diagnostics(server_id, set, cx)
        });
        Ok(())
    }

    fn register_buffer_with_language_servers(
        &mut self,
        buffer_handle: &Model<Buffer>,
        cx: &mut ModelContext<LspStore>,
    ) {
        let buffer = buffer_handle.read(cx);
        let buffer_id = buffer.remote_id();

        let Some(file) = File::from_dyn(buffer.file()) else {
            return;
<|editable_region_start|>
        };
        dbg!("registering", file<|user_cursor_is_here|>
        if !file.is_local() {
<|editable_region_end|>
            return;
        }

        let abs_path = file.abs_path(cx);
        let Some(uri) = lsp::Url::from_file_path(&abs_path).log_err() else {
            return;
        };
        let initial_snapshot = buffer.text_snapshot();
        let worktree_id = file.worktree_id(cx);
        let worktree = file.worktree.clone();

        let Some(language) = buffer.language().cloned() else {
            return;
        };
        self.start_language_servers(&worktree, language.name(), cx);
        for adapter in self.languages.lsp_adapters(&language.name()) {
```
</input>
<output>
```crates/project/src/lsp_store.rs
        buffer.update(cx, |buffer, cx| {
            buffer.update_diagnostics(server_id, set, cx)
        });
        Ok(())
    }

    fn register_buffer_with_language_servers(
        &mut self,
        buffer_handle: &Model<Buffer>,
        cx: &mut ModelContext<LspStore>,
    ) {
        let buffer = buffer_handle.read(cx);
        let buffer_id = buffer.remote_id();

        let Some(file) = File::from_dyn(buffer.file()) else {
            return;
<|editable_region_start|>
        };
        dbg!("registering", file);
        if !file.is_local() {
<|editable_region_end|>
            return;
        }

        let abs_path = file.abs_path(cx);
        let Some(uri) = lsp::Url::from_file_path(&abs_path).log_err() else {
            return;
        };
        let initial_snapshot = buffer.text_snapshot();
        let worktree_id = file.worktree_id(cx);
        let worktree = file.worktree.clone();

        let Some(language) = buffer.language().cloned() else {
            return;
        };
        self.start_language_servers(&worktree, language.name(), cx);
        for adapter in self.languages.lsp_adapters(&language.name()) {
```
</output>

<labels>
local-edit,complete-pattern
</labels>
