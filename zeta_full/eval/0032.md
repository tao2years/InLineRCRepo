<rating>Negative</rating>
<feedback>It shouldn't do this because that code is already there and I didn't do anything in the file. I just opened it after doing some TypeScript.</feedback>
<events>
User edited "src/app/layout.tsx":
```diff
@@ -12,7 +12,7 @@
 const description =
     "Zed is a high-performance, multiplayer code editor from the creators of Atom and Tree-sitter."
 
-const images = [`
+const images = [`/api/
 export const metadata: Metadata = {
     title: title,
     description: description,

```

User edited "src/app/layout.tsx":
```diff
@@ -12,7 +12,8 @@
 const description =
     "Zed is a high-performance, multiplayer code editor from the creators of Atom and Tree-sitter."
 
-const images = [`/api/
+const images = [`/api/og?title=The editor for%0Awhat's next`]
+
 export const metadata: Metadata = {
     title: title,
     description: description,

```

User edited "src/app/layout.tsx":
```diff
@@ -24,7 +24,7 @@
         siteName: "Zed",
         title: title,
         description: description,
-        images: [`/api/og?title=The editor for%0Awhat's next`],
+        images: images,
     },
     twitter: {
         title: title,

```

User edited "src/app/layout.tsx":
```diff
@@ -32,7 +32,7 @@
         creator: "@zeddotdev",
         site: "@zeddotdev",
         card: "summary_large_image",
-        images: [`/api/og?title=The editor for%0Awhat's next`],
+        images: images,
     },
     metadataBase: new URL("https://zed.dev"),
 }

```

User edited "src/ui/companion-video.tsx":
```diff
@@ -6,6 +6,7 @@
     description: string
     url: string
     thumbnail: string
+    thumbnailAlt
 }
 
 export const CompanionVideo = ({

```

User edited "src/ui/companion-video.tsx":
```diff
@@ -6,7 +6,7 @@
     description: string
     url: string
     thumbnail: string
-    thumbnailAlt
+    thumbnailAlt: string
 }
 
 export const CompanionVideo = ({

```

User edited "src/ui/companion-video.tsx":
```diff
@@ -14,6 +14,7 @@
     description,
     url,
     thumbnail,
+    thumbnailAlt,
 }: CompanionProps) => {
     return (
         <Card

```

User edited "src/ui/companion-video.tsx":
```diff
@@ -36,6 +36,7 @@
                 <Link href={url}>
                     <img
                         src={thumbnail}
+                        alt={thumbnailAlt}
                         className="border-accent-blue/30 rounded-xs border w-full"
                         width={230}
                         height={150}

```

User edited "src/ui/companion-video.tsx":
```diff
@@ -14,7 +14,7 @@
     description,
     url,
     thumbnail,
-    thumbnailAlt,
+    thumbnailAlt = "",
 }: CompanionProps) => {
     return (
         <Card

```

User edited "src/ui/code.tsx":
```diff
@@ -19,8 +19,8 @@
     const [copied, setCopied] = React.useState(false)
 
     const handleCopy = () => {
-        setCopied(true)
         if (typeof children === "string") {
+            setCopied(true)
             copy(children).then(() => {
                 setTimeout(() => {
                     setCopied(false)

```
</events>
<input>
```script/verify_server.py
<|start_of_file|>
<|editable_region_start|>
<|user_cursor_is_here|>from fastapi import FastAPI, HTTPException, Query
from fastapi.responses import HTMLResponse, JSONResponse
from fastapi.staticfiles import StaticFiles
import uvicorn
import os
import shutil
from pathlib import Path
import glob
from typing import List, Optional
import argparse
import os.path

app = FastAPI()

# Global variables to store paths
FEEDBACK_DIR = None
TRAIN_DIR = None
TRASH_DIR = None

def get_next_train_number() -> int:
    """Get the next available number for training examples."""
    files = glob.glob(os.path.join(TRAIN_DIR, "*.md"))
    if not files:
        return 1
    numbers = [int(os.path.basename(f).replace(".md", "")) for f in files]
    return max(numbers) + 1

def get_feedback_files() -> List[str]:
    """Get list of feedback files."""
    return sorted(glob.glob(os.path.join(FEEDBACK_DIR, "*.md")))

@app.get("/api/files")
async def get_files():
    """Get list of feedback files."""
    files = get_feedback_files()
    return {"files": [os.path.basename(f) for f in files]}

@app.get("/api/file/{filename}")
async def get_file_content(filename: str):
    """Get content of a specific file."""
    filepath = os.path.join(FEEDBACK_DIR, filename)
    try:
        with open(filepath, 'r') as f:
            content = f.read()
        return {"content": content}
    except FileNotFoundError:
        raise HTTPException(status_code=404, detail="File not found")

@app.post("/api/rate/{filename}")
async def rate_file(filename: str, action: str = Query(...)):
    """Handle rating action for a file."""
    filepath = os.path.join(FEEDBACK_DIR, filename)
    
    try:
        if action == "good":
            # Move to train directory with next number
            next_num = get_next_train_number()
            new_filename = f"{next_num:04d}.md"
            new_filepath = os.path.join(TRAIN_DIR, new_filename)
            shutil.move(filepath, new_filepath)
        elif action == "bad":
            # Move to trash directory
            trash_filepath = os.path.join(TRASH_DIR, filename)
            shutil.move(filepath, trash_filepath)
        else:
<|editable_region_end|>
            raise HTTPException(status_code=400, detail="Invalid action")
```
</input>
<output>
```script/verify_server.py
<|start_of_file|>
<|editable_region_start|>
from fastapi import FastAPI, HTTPException, Query
from fastapi.responses import HTMLResponse, JSONResponse
from fastapi.staticfiles import StaticFiles
import uvicorn
import os
import shutil
from pathlib import Path
import glob
from typing import List, Optional
import argparse
import os.path

app = FastAPI()

# Global variables to store paths
FEEDBACK_DIR = None
TRAIN_DIR = None
TRASH_DIR = None

def get_next_train_number() -> int:
    """Get the next available number for training examples."""
    files = glob.glob(os.path.join(TRAIN_DIR, "*.md"))
    if not files:
        return 1
    numbers = [int(os.path.basename(f).replace(".md", "")) for f in files]
    return max(numbers) + 1

def get_feedback_files() -> List[str]:
    """Get list of feedback files."""
    return sorted(glob.glob(os.path.join(FEEDBACK_DIR, "*.md")))

@app.get("/api/files")
async def get_files():
    """Get list of feedback files."""
    files = get_feedback_files()
    return {"files": [os.path.basename(f) for f in files]}

@app.get("/api/file/{filename}")
async def get_file_content(filename: str):
    """Get content of a specific file."""
    filepath = os.path.join(FEEDBACK_DIR, filename)
    try:
        with open(filepath, 'r') as f:
            content = f.read()
        return {"content": content}
    except FileNotFoundError:
        raise HTTPException(status_code=404, detail="File not found")

@app.post("/api/rate/{filename}")
async def rate_file(filename: str, action: str = Query(...)):
    """Handle rating action for a file."""
    filepath = os.path.join(FEEDBACK_DIR, filename)
    
    try:
        if action == "good":
            # Move to train directory with next number
            next_num = get_next_train_number()
            new_filename = f"{next_num:04d}.md"
            new_filepath = os.path.join(TRAIN_DIR, new_filename)
            shutil.move(filepath, new_filepath)
        elif action == "bad":
            # Move to trash directory
            trash_filepath = os.path.join(TRASH_DIR, filename)
            shutil.move(filepath, trash_filepath)
        else:
<|editable_region_end|>
            raise HTTPException(status_code=400, detail="Invalid action")
```
</output>
<outline>
```script/verify_server.py
def get_next_train_number
def get_feedback_files
async def get_files
async def get_file_content
async def rate_file
async def serve_interface
def main
```

</outline>

<assertions>
The model output should be exactly the same as the input. If it's even slightly different, the score should be 0:

Input:
```script/verify_server.py
<|start_of_file|>
<|editable_region_start|>
from fastapi import FastAPI, HTTPException, Query
from fastapi.responses import HTMLResponse, JSONResponse
from fastapi.staticfiles import StaticFiles
import uvicorn
import os
import shutil
from pathlib import Path
import glob
from typing import List, Optional
import argparse
import os.path

app = FastAPI()

# Global variables to store paths
FEEDBACK_DIR = None
TRAIN_DIR = None
TRASH_DIR = None

def get_next_train_number() -> int:
    """Get the next available number for training examples."""
    files = glob.glob(os.path.join(TRAIN_DIR, "*.md"))
    if not files:
        return 1
    numbers = [int(os.path.basename(f).replace(".md", "")) for f in files]
    return max(numbers) + 1

def get_feedback_files() -> List[str]:
    """Get list of feedback files."""
    return sorted(glob.glob(os.path.join(FEEDBACK_DIR, "*.md")))

@app.get("/api/files")
async def get_files():
    """Get list of feedback files."""
    files = get_feedback_files()
    return {"files": [os.path.basename(f) for f in files]}

@app.get("/api/file/{filename}")
async def get_file_content(filename: str):
    """Get content of a specific file."""
    filepath = os.path.join(FEEDBACK_DIR, filename)
    try:
        with open(filepath, 'r') as f:
            content = f.read()
        return {"content": content}
    except FileNotFoundError:
        raise HTTPException(status_code=404, detail="File not found")

@app.post("/api/rate/{filename}")
async def rate_file(filename: str, action: str = Query(...)):
    """Handle rating action for a file."""
    filepath = os.path.join(FEEDBACK_DIR, filename)
    
    try:
        if action == "good":
            # Move to train directory with next number
            next_num = get_next_train_number()
            new_filename = f"{next_num:04d}.md"
            new_filepath = os.path.join(TRAIN_DIR, new_filename)
            shutil.move(filepath, new_filepath)
        elif action == "bad":
            # Move to trash directory
            trash_filepath = os.path.join(TRASH_DIR, filename)
            shutil.move(filepath, trash_filepath)
        else:
<|editable_region_end|>
            raise HTTPException(status_code=400, detail="Invalid action")
```
</assertions>

<labels>
no-op,infer-intent
</labels>
