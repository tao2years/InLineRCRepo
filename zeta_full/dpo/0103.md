<events>
User edited "app/models/user.rb":
```diff
@@ -81,7 +81,7 @@
     omniauth_providers: %i[facebook facebook_analytics google_oauth2 google_specific_video]
 
   # Enums
-  enum role: {user: 0, creator: 1, delegate: 2, admin: 3}
+  enum :role: {user: 0, creator: 1, delegate: 2, admin: 3}
 
   # Associations
   delegated_type :profileable, types: %w[Creator Delegate Admin Bot], dependent: :destroy

```

User edited "app/models/user.rb":
```diff
@@ -81,7 +81,7 @@
     omniauth_providers: %i[facebook facebook_analytics google_oauth2 google_specific_video]
 
   # Enums
-  enum :role: {user: 0, creator: 1, delegate: 2, admin: 3}
+  enum :role,user: 0, creator: 1, delegate: 2, admin: 3}
 
   # Associations
   delegated_type :profileable, types: %w[Creator Delegate Admin Bot], dependent: :destroy

```

User edited "app/models/user.rb":
```diff
@@ -81,7 +81,7 @@
     omniauth_providers: %i[facebook facebook_analytics google_oauth2 google_specific_video]
 
   # Enums
-  enum :role,user: 0, creator: 1, delegate: 2, admin: 3}
+  enum :role, user: 0, creator: 1, delegate: 2, admin: 3
 
   # Associations
   delegated_type :profileable, types: %w[Creator Delegate Admin Bot], dependent: :destroy

```

User edited "app/models/campaign.rb":
```diff
@@ -137,7 +137,7 @@
   validates :title, :posting_date, presence: true
 
   # Enums
-  enum status: {fresh: 0, term_agreement: 1, content_creation: 2, payment: 3, complete: 4, declined: 5}
+  enum :status fresh: 0, term_agreement: 1, content_creation: 2, payment: 3, complete: 4, declined: 5}
 
   # 3rd Party
   has_noticed_notifications

```

User edited "app/models/campaign.rb":
```diff
@@ -137,7 +137,7 @@
   validates :title, :posting_date, presence: true
 
   # Enums
-  enum :status fresh: 0, term_agreement: 1, content_creation: 2, payment: 3, complete: 4, declined: 5}
+  enum :status, fresh: 0, term_agreement: 1, content_creation: 2, payment: 3, complete: 4, declined: 5}
 
   # 3rd Party
   has_noticed_notifications

```
</events>
<input>
```app/models/campaign.rb
  # def creator
  #   super || legacy_users.creator.first.creator
  # end

  # Active Storage
  has_one_attached :brief_document
  has_one_attached :legal_document

  # Action Text
  has_rich_text :additional_disclaimer
  has_rich_text :tracking_links_and_discount_codes

  # Scopes
  scope :ongoing, -> { where(status: %w[term_agreement content_creation]) }
  scope :done, -> { where(status: %w[complete declined]) }
  scope :past_schedule, -> { where(posting_date: ..Time.zone.now) }
  scope :upcoming_schedule, -> { where(posting_date: Time.zone.now..) }

  scope :by_stage,
    ->(stage) {
      if stage.present?
        if %w[past_schedule upcoming_schedule].include?(stage)
          (stage == "past_schedule") ? past_schedule.order(posting_date: :desc) : upcoming_schedule.order(posting_date: :asc)
        else
          where(status: stage)
        end
      end
    }

  # Validations
  validates :title, :posting_date, presence: true
<|editable_region_start|>

  # Enums
  enum :status, <|user_cursor_is_here|>fresh: 0, term_agreement: 1, content_creation: 2, payment: 3, complete: 4, declined: 5}

  # 3rd Party
  has_noticed_notifications
  monetize :custom_price_cents, with_model_currency: :currency, allow_nil: true
  monetize :final_price_cents, with_model_currency: :currency, allow_nil: true

  # Nested attributes
  accepts_nested_attributes_for :campaign_deliverables, reject_if: ->(attributes) { attributes["quantity"].to_i < 1 }, allow_destroy: true

  # Callbacks
  before_validation on: :create do
    set_default_organization
    set_default_current_delegate
    set_default_currency
    set_default_organization
<|editable_region_end|>
  end

  before_validation :calculate_final_price
  before_validation :assign_status_for_external_campaigns
  before_validation :add_deadline_dates

  after_update_commit :set_posting_date_for_deliverables
  after_update_commit :set_payment_due_at
  after_update_commit :accept_agreement, if: :accepting_agreement_kind

  # Decorators / Helpers

  def delegate
    primary_delegate || delegates.first
  end

  def members
    [creator_user, primary_delegate&.user || delegate_users, owner].flatten.compact
```
</input>
<output>
```app/models/campaign.rb
  # def creator
  #   super || legacy_users.creator.first.creator
  # end

  # Active Storage
  has_one_attached :brief_document
  has_one_attached :legal_document

  # Action Text
  has_rich_text :additional_disclaimer
  has_rich_text :tracking_links_and_discount_codes

  # Scopes
  scope :ongoing, -> { where(status: %w[term_agreement content_creation]) }
  scope :done, -> { where(status: %w[complete declined]) }
  scope :past_schedule, -> { where(posting_date: ..Time.zone.now) }
  scope :upcoming_schedule, -> { where(posting_date: Time.zone.now..) }

  scope :by_stage,
    ->(stage) {
      if stage.present?
        if %w[past_schedule upcoming_schedule].include?(stage)
          (stage == "past_schedule") ? past_schedule.order(posting_date: :desc) : upcoming_schedule.order(posting_date: :asc)
        else
          where(status: stage)
        end
      end
    }

  # Validations
  validates :title, :posting_date, presence: true
<|editable_region_start|>

  # Enums
  enum :status, fresh: 0, term_agreement: 1, content_creation: 2, payment: 3, complete: 4, declined: 5

  # 3rd Party
  has_noticed_notifications
  monetize :custom_price_cents, with_model_currency: :currency, allow_nil: true
  monetize :final_price_cents, with_model_currency: :currency, allow_nil: true

  # Nested attributes
  accepts_nested_attributes_for :campaign_deliverables, reject_if: ->(attributes) { attributes["quantity"].to_i < 1 }, allow_destroy: true

  # Callbacks
  before_validation on: :create do
    set_default_organization
    set_default_current_delegate
    set_default_currency
    set_default_organization
<|editable_region_end|>
  end

  before_validation :calculate_final_price
  before_validation :assign_status_for_external_campaigns
  before_validation :add_deadline_dates

  after_update_commit :set_posting_date_for_deliverables
  after_update_commit :set_payment_due_at
  after_update_commit :accept_agreement, if: :accepting_agreement_kind

  # Decorators / Helpers

  def delegate
    primary_delegate || delegates.first
  end

  def members
    [creator_user, primary_delegate&.user || delegate_users, owner].flatten.compact
```
</output>
<outline>
```app/models/campaign.rb
class Campaign
def delegate
def members
def display_name
def external?
def terms_accepted?
def accept_terms
def has_paid_media?
def next_status
def previous_status
def display_organization
def displayed_price
def signed?
def standard_agreement?
private
def instagram_story_quantity_nil_or_greater_than_three
def add_deadline_dates
def assign_status_for_external_campaigns
def set_default_currency
def set_default_current_delegate
def set_default_organization
def set_posting_date_for_deliverables
def calculate_final_price
def accept_agreement
def set_payment_due_at
```

</outline>
<rejected>
```app/models/campaign.rb
  # def creator
  #   super || legacy_users.creator.first.creator
  # end

  # Active Storage
  has_one_attached :brief_document
  has_one_attached :legal_document

  # Action Text
  has_rich_text :additional_disclaimer
  has_rich_text :tracking_links_and_discount_codes

  # Scopes
  scope :ongoing, -> { where(status: %w[term_agreement content_creation]) }
  scope :done, -> { where(status: %w[complete declined]) }
  scope :past_schedule, -> { where(posting_date: ..Time.zone.now) }
  scope :upcoming_schedule, -> { where(posting_date: Time.zone.now..) }

  scope :by_stage,
    ->(stage) {
      if stage.present?
        if %w[past_schedule upcoming_schedule].include?(stage)
          (stage == "past_schedule") ? past_schedule.order(posting_date: :desc) : upcoming_schedule.order(posting_date: :asc)
        else
          where(status: stage)
        end
      end
    }

  # Validations
  validates :title, :posting_date, presence: true
<|editable_region_start|>

  # Enums
  enum :status, user: 0, creator: 1, delegate: 2, admin: 3

  # 3rd Party
  has_noticed_notifications
  monetize :custom_price_cents, with_model_currency: :currency, allow_nil: true
  monetize :final_price_cents, with_model_currency: :currency, allow_nil: true

  # Nested attributes
  accepts_nested_attributes_for :campaign_deliverables, reject_if: ->(attributes) { attributes["quantity"].to_i < 1 }, allow_destroy: true

  # Callbacks
  before_validation on: :create do
    set_default_organization
    set_default_current_delegate
    set_default_currency
    set_default_organization
<|editable_region_end|>
  end

  before_validation :calculate_final_price
  before_validation :assign_status_for_external_campaigns
  before_validation :add_deadline_dates

  after_update_commit :set_posting_date_for_deliverables
  after_update_commit :set_payment_due_at
  after_update_commit :accept_agreement, if: :accepting_agreement_kind

  # Decorators / Helpers

  def delegate
    primary_delegate || delegates.first
  end

  def members
    [creator_user, primary_delegate&.user || delegate_users, owner].flatten.compact
```
</rejected>

<labels>
local-edit,complete-pattern
</labels>
