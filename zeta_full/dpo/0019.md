<events>
User edited "crates/zeta/src/zeta.rs":
```diff
@@ -1310,7 +1310,7 @@
                             })
                         .with_secondary_click_message("No")
                         .on_secondary_click(move |_window, cx| {
-                            
+                            let 
                             zeta.update(cx, |zeta, cx| {
                                 zeta.set_worktree_data_collection_choice(
                                     worktree_id,

```
</events>
<input>
```crates/zeta/src/zeta.rs
            || zeta
                .data_collection_options
                .worktree_choices
                .contains_key(&worktree_id)
        {
            return;
        }

        struct ZetaDataCollectionNotification;

        let notification_id = NotificationId::unique::<ZetaDataCollectionNotification>();

        self.workspace
            .update(cx, |workspace, cx| {
                workspace.show_notification(notification_id, cx, |cx| {
                    let zeta = self.zeta.clone();
                    cx.new(move |_cx| {
                        MessageNotification::new("hi")
                            .with_click_message("Yes")
                            .on_click({
                                let zeta = zeta.clone();
                                move |_window, cx| {
                                    zeta.update(cx, |zeta, cx| {
                                        zeta.set_worktree_data_collection_choice(
                                            worktree_id,
                                            true,
                                            cx,
                                        )
                                    });
                                }
                            })
                        .with_secondary_click_message("No")
                        .on_secondary_click(move |_window, cx| {
                            let 
                            zeta.update(cx, |zeta, cx| {
                                zeta.set_worktree_data_collection_choice(
                                    worktree_id,
                                    false,
                                    cx,
                                );
                            });
<|editable_region_start|>
                        })
                        .with_tertiary_click_message("Don't show me this anymor")
                        .on_tertiary_click(move |_window, cx| {
                            zeta.update(cx, |zeta, cx| {
                                zeta.set_data_collection_do_not_ask_again(cx);
                            });
                        })
                    })
                });
            })
  <|user_cursor_is_here|>          .log_err();
    }

    fn discard(&mut self, _cx: &mut Context<Self>) {
        self.pending_completions.clear();
<|editable_region_end|>
        self.current_completion.take();
    }

    fn suggest(
        &mut self,
        buffer: &Entity<Buffer>,
        cursor_position: language::Anchor,
        cx: &mut Context<Self>,
    ) -> Option<inline_completion::InlineCompletion> {
        let CurrentInlineCompletion {
            buffer_id,
```
</input>
<output>
```crates/zeta/src/zeta.rs
            || zeta
                .data_collection_options
                .worktree_choices
                .contains_key(&worktree_id)
        {
            return;
        }

        struct ZetaDataCollectionNotification;

        let notification_id = NotificationId::unique::<ZetaDataCollectionNotification>();

        self.workspace
            .update(cx, |workspace, cx| {
                workspace.show_notification(notification_id, cx, |cx| {
                    let zeta = self.zeta.clone();
                    cx.new(move |_cx| {
                        MessageNotification::new("hi")
                            .with_click_message("Yes")
                            .on_click({
                                let zeta = zeta.clone();
                                move |_window, cx| {
                                    zeta.update(cx, |zeta, cx| {
                                        zeta.set_worktree_data_collection_choice(
                                            worktree_id,
                                            true,
                                            cx,
                                        )
                                    });
                                }
                            })
                        .with_secondary_click_message("No")
                        .on_secondary_click(move |_window, cx| {
                            let 
                            zeta.update(cx, |zeta, cx| {
                                zeta.set_worktree_data_collection_choice(
                                    worktree_id,
                                    false,
                                    cx,
                                );
                            });
<|editable_region_start|>
                        })
                        .with_tertiary_click_message("Don't show me this anymor")
                        .on_tertiary_click(move |_window, cx| {
                            zeta.update(cx, |zeta, cx| {
                                zeta.set_data_collection_do_not_ask_again(cx);
                            });
                        })
                    })
                });
            })
            .log_err();
    }

    fn discard(&mut self, _cx: &mut Context<Self>) {
        self.pending_completions.clear();
<|editable_region_end|>
        self.current_completion.take();
    }

    fn suggest(
        &mut self,
        buffer: &Entity<Buffer>,
        cursor_position: language::Anchor,
        cx: &mut Context<Self>,
    ) -> Option<inline_completion::InlineCompletion> {
        let CurrentInlineCompletion {
            buffer_id,
```
</output>
<outline>
```crates/zeta/src/zeta.rs
mod completion_diff_element
mod rate_completion_modal
const CURSOR_MARKER
const START_OF_FILE_MARKER
const EDITABLE_REGION_START_MARKER
const EDITABLE_REGION_END_MARKER
const BUFFER_CHANGE_GROUPING_INTERVAL
const KVP_ZETA_DATA_COLLECTION_WORKTREE_OPTIONS_KEY
pub struct InlineCompletionId
impl From<InlineCompletionId> for gpui::ElementId
 fn from
impl std::fmt::Display for InlineCompletionId
 fn fmt
impl InlineCompletionId
 fn new
struct ZetaGlobal
impl Global for ZetaGlobal
pub struct InlineCompletion
 id
 path
 excerpt_range
 cursor_offset
 edits
 snapshot
 edit_preview
 input_outline
 input_events
 input_excerpt
 output_excerpt
 request_sent_at
 response_received_at
impl InlineCompletion
 fn latency
 fn interpolate
fn interpolate
impl std::fmt::Debug for InlineCompletion
 fn fmt
pub struct Zeta
 client
 events
 registered_buffers
 shown_completions
 rated_completions
 data_collection_options
 llm_token
 _llm_token_subscription
 tos_accepted
 _user_store_subscription
impl Zeta
 pub fn global
 pub fn register
 pub fn clear_history
 fn new
 fn push_event
  const MAX_EVENT_COUNT
 pub fn register_buffer
 fn handle_buffer_event
 pub fn request_completion_impl
 pub fn fill_with_fake_completions
 pub fn fake_completion
 pub fn request_completion
 fn perform_predict_edits
 fn process_completion_response
 fn parse_edits
 pub fn compute_edits
 pub fn is_completion_rated
 pub fn completion_shown
 pub fn rate_completion
 pub fn shown_completions
 pub fn shown_completions_len
 fn report_changes_for_buffer
 fn set_worktree_data_collection_choice
 fn set_data_collection_do_not_ask_again
struct DataCollectionWorktreeOptions
 do_not_ask_again
 worktree_choices
fn common_prefix
fn prompt_for_outline
fn prompt_for_excerpt
fn excerpt_range_for_position
 const CONTEXT_LINES
struct RegisteredBuffer
 snapshot
 _subscriptions
enum Event
 BufferChange
  old_snapshot
  new_snapshot
  timestamp
impl Event
 fn to_prompt
struct CurrentInlineCompletion
 buffer_id
 completion
impl CurrentInlineCompletion
 fn should_replace_completion
struct PendingCompletion
 id
 _task
pub struct ZetaInlineCompletionProvider
 zeta
 workspace
 pending_completions
 next_pending_completion_id
 current_completion
impl ZetaInlineCompletionProvider
 pub const DEBOUNCE_TIMEOUT
 pub fn new
impl inline_completion::InlineCompletionProvider for ZetaInlineCompletionProvider
 fn name
 fn display_name
 fn show_completions_in_menu
 fn show_completions_in_normal_mode
 fn show_tab_accept_marker
 fn is_enabled
 fn needs_terms_acceptance
 fn is_refreshing
 fn refresh
 fn cycle
 fn accept
  struct ZetaDataCollectionNotification
fn discard
fn suggest
mod tests
 async fn test_inline_completion_basic_interpolation
 async fn test_inline_completion_end_of_buffer
 fn to_completion_edits
 fn from_completion_edits
 fn init_logger
```

</outline>
<rejected>
```crates/zeta/src/zeta.rs
            || zeta
                .data_collection_options
                .worktree_choices
                .contains_key(&worktree_id)
        {
            return;
        }

        struct ZetaDataCollectionNotification;

        let notification_id = NotificationId::unique::<ZetaDataCollectionNotification>();

        self.workspace
            .update(cx, |workspace, cx| {
                workspace.show_notification(notification_id, cx, |cx| {
                    let zeta = self.zeta.clone();
                    cx.new(move |_cx| {
                        MessageNotification::new("hi")
                            .with_click_message("Yes")
                            .on_click({
                                let zeta = zeta.clone();
                                move |_window, cx| {
                                    zeta.update(cx, |zeta, cx| {
                                        zeta.set_worktree_data_collection_choice(
                                            worktree_id,
                                            true,
                                            cx,
                                        )
                                    });
                                }
                            })
                        .with_secondary_click_message("No")
                        .on_secondary_click(move |_window, cx| {
                            let 
                            zeta.update(cx, |zeta, cx| {
                                zeta.set_worktree_data_collection_choice(
                                    worktree_id,
                                    false,
                                    cx,
                                );
                            });
<|editable_region_start|>
                        })
                        .with_tertiary_click_message("Don't show me this anymor")
                        .on_tertiary_click(move |_window, cx| {
                            zeta.update(cx, |zeta, cx| {
                                zeta.set_data_collection_do_not_ask_again(cx);
                            });
                        })
                    })
                });
            })
  .log_err();
    }

    fn discard(&mut self, _cx: &mut Context<Self>) {
        self.pending_completions.clear();
<|editable_region_end|>
        self.current_completion.take();
    }

    fn suggest(
        &mut self,
        buffer: &Entity<Buffer>,
        cursor_position: language::Anchor,
        cx: &mut Context<Self>,
    ) -> Option<inline_completion::InlineCompletion> {
        let CurrentInlineCompletion {
            buffer_id,
```
</rejected>

<labels>
local-edit,unknown
</labels>
