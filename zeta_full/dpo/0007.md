<events>
User edited "crates/git_ui/src/git_panel.rs":
```diff
@@ -208,7 +208,7 @@
                 workspace,
             };
             git_panel.schedule_update(window, cx);
-            git_panel.show_scrollbar = git_panel.should_show_scrollbar(window, cx);
+            git_panel.show_scrollbar = git_panel.should_show_scrollbar(cx);
             git_panel
         });
 

```

User edited "crates/git_ui/src/repository_selector.rs":
```diff
@@ -34,7 +34,7 @@
         };
 
         let picker =
-            cx.new_model(|cx| Picker::uniform_list(delegate, cx).max_height(Some(rems(20.).into())));
+            cx.new_model(|cx| Picker::uniform_list(delegate, window, cx).max_height(Some(rems(20.).into())));
 
         let _subscriptions = if let Some(git_state) = git_state {
             vec![cx.subscribe(&git_state, Self::handle_project_git_event)]

```

User edited "crates/assistant2/src/context_picker/thread_context_picker.rs":
```diff
@@ -104,7 +104,7 @@
         "Search threadsâ€¦".into()
     }
 
-    fn update_matches(&mut self, query: String, cx: &mut ViewContext<Picker<Self>>) -> Task<()> {
+    fn update_matches(&mut self, query: String, cx: &mut ModelContext<Picker<Self>>) -> Task<()> {
         let Ok(threads) = self.thread_store.update(cx, |this, _cx| {
             this.threads()
                 .into_iter()

```

User edited "crates/assistant_context_editor/src/context_history.rs":
```diff
@@ -142,7 +142,7 @@
         self.selected_index
     }
 
-    fn set_selected_index(&mut self, ix: usize, _cx: &mut <Picker<Self>>) {
+    fn set_selected_index(&mut self, ix: usize, _cx: &mut ModelContext<Picker<Self>>) {
         self.selected_index = ix;
     }
 

```

User edited "crates/assistant_context_editor/src/context_history.rs":
```diff
@@ -150,7 +150,7 @@
         "Search...".into()
     }
 
-    fn update_matches(&mut self, query: String, cx: &mut ViewContext<Picker<Self>>) -> Task<()> {
+    fn update_matches(&mut self, query: String, cx: &mut ViewContextPicker<Self>>) -> Task<()> {
         let search = self.store.read(cx).search(query, cx);
         cx.spawn(|this, mut cx| async move {
             let matches = search.await;

```

User edited "crates/assistant_context_editor/src/context_history.rs":
```diff
@@ -150,7 +150,7 @@
         "Search...".into()
     }
 
-    fn update_matches(&mut self, query: String, cx: &mut ViewContextPicker<Self>>) -> Task<()> {
+    fn update_matches(&mut self, query: String, cx: &mut ViewContext<Picker<Self>>) -> Task<()> {
         let search = self.store.read(cx).search(query, cx);
         cx.spawn(|this, mut cx| async move {
             let matches = search.await;

```

User edited "crates/assistant_context_editor/src/context_history.rs":
```diff
@@ -150,7 +150,7 @@
         "Search...".into()
     }
 
-    fn update_matches(&mut self, query: String, cx: &mut ViewContext<Picker<Self>>) -> Task<()> {
+    fn update_matches(&mut self, query: String, cx: &mut ModelContext<Picker<Self>>) -> Task<()> {
         let search = self.store.read(cx).search(query, cx);
         cx.spawn(|this, mut cx| async move {
             let matches = search.await;

```

User edited "crates/assistant_context_editor/src/context_history.rs":
```diff
@@ -169,7 +169,7 @@
         })
     }
 
-    fn confirm(&mut self, _secondary: bool, cx: &mut ViewContext<Picker<Self>>) {
+    fn confirm(&mut self, _secondary: bool, cx: &mut ModelContext<Picker<Self>>) {
         if let Some(metadata) = self.matches.get(self.selected_index) {
             cx.emit(SavedContextPickerEvent::Confirmed(metadata.clone()));
         }

```

User edited "crates/assistant_context_editor/src/context_history.rs":
```diff
@@ -174,7 +174,7 @@
             cx.emit(SavedContextPickerEvent::Confirmed(metadata.clone()));
         }
     }
-
+    
     fn dismissed(&mut self, _cx: &mut ViewContext<Picker<Self>>) {}
 
     fn render_match(

```
</events>
<input>
```crates/assistant_context_editor/src/context_history.rs
    fn set_selected_index(&mut self, ix: usize, _cx: &mut ModelContext<Picker<Self>>) {
        self.selected_index = ix;
    }

    fn placeholder_text(&self, _window: &mut Window, _cx: &mut AppContext) -> Arc<str> {
        "Search...".into()
    }

    fn update_matches(&mut self, query: String, cx: &mut ModelContext<Picker<Self>>) -> Task<()> {
        let search = self.store.read(cx).search(query, cx);
        cx.spawn(|this, mut cx| async move {
            let matches = search.await;
            this.update(&mut cx, |this, cx| {
                let host_contexts = this.delegate.store.read(cx).host_contexts();
                this.delegate.matches = host_contexts
                    .iter()
                    .cloned()
                    .map(ContextMetadata::Remote)
                    .chain(matches.into_iter().map(ContextMetadata::Saved))
                    .collect();
                this.delegate.selected_index = 0;
                cx.notify();
            })
            .ok();
        })
    }

<|editable_region_start|>
    fn confirm(&mut self, _secondary: bool, cx: &mut ModelContext<Picker<Self>>) {
        if let Some(metadata) = self.matches.get(self.selected_index) {
            cx.emit(SavedContextPickerEvent::Confirmed(metadata.clone()));
        }
    }
    <|user_cursor_is_here|>
    fn dismissed(&mut self, _cx: &mut ViewContext<Picker<Self>>) {}

    fn render_match(
        &self,
        ix: usize,
        selected: bool,
        cx: &mut ViewContext<Picker<Self>>,
    ) -> Option<Self::ListItem> {
        let context = self.matches.get(ix)?;
        let item = match context {
            ContextMetadata::Remote(context) => {
                let host_user = self.project.read(cx).host().and_then(|collaborator| {
                    self.project
                        .read(cx)
                        .user_store()
                        .read(cx)
                        .get_cached_user(collaborator.user_id)
                });
                div()
                    .flex()
                    .w_full()
                    .justify_between()
                    .gap_2()
<|editable_region_end|>
                    .child(
                        h_flex().flex_1().overflow_x_hidden().child(
                            Label::new(context.summary.clone().unwrap_or(DEFAULT_TAB_TITLE.into()))
                                .size(LabelSize::Small),
                        ),
                    )
                    .child(
                        h_flex()
                            .gap_2()
                            .children(if let Some(host_user) = host_user {
```
</input>
<output>
```crates/assistant_context_editor/src/context_history.rs
    fn set_selected_index(&mut self, ix: usize, _cx: &mut ModelContext<Picker<Self>>) {
        self.selected_index = ix;
    }

    fn placeholder_text(&self, _window: &mut Window, _cx: &mut AppContext) -> Arc<str> {
        "Search...".into()
    }

    fn update_matches(&mut self, query: String, cx: &mut ModelContext<Picker<Self>>) -> Task<()> {
        let search = self.store.read(cx).search(query, cx);
        cx.spawn(|this, mut cx| async move {
            let matches = search.await;
            this.update(&mut cx, |this, cx| {
                let host_contexts = this.delegate.store.read(cx).host_contexts();
                this.delegate.matches = host_contexts
                    .iter()
                    .cloned()
                    .map(ContextMetadata::Remote)
                    .chain(matches.into_iter().map(ContextMetadata::Saved))
                    .collect();
                this.delegate.selected_index = 0;
                cx.notify();
            })
            .ok();
        })
    }

<|editable_region_start|>
    fn confirm(&mut self, _secondary: bool, cx: &mut ModelContext<Picker<Self>>) {
        if let Some(metadata) = self.matches.get(self.selected_index) {
            cx.emit(SavedContextPickerEvent::Confirmed(metadata.clone()));
        }
    }

    fn dismissed(&mut self, _cx: &mut ModelContext<Picker<Self>>) {}

    fn render_match(
        &self,
        ix: usize,
        selected: bool,
        cx: &mut ModelContext<Picker<Self>>,
    ) -> Option<Self::ListItem> {
        let context = self.matches.get(ix)?;
        let item = match context {
            ContextMetadata::Remote(context) => {
                let host_user = self.project.read(cx).host().and_then(|collaborator| {
                    self.project
                        .read(cx)
                        .user_store()
                        .read(cx)
                        .get_cached_user(collaborator.user_id)
                });
                div()
                    .flex()
                    .w_full()
                    .justify_between()
                    .gap_2()
<|editable_region_end|>
                    .child(
                        h_flex().flex_1().overflow_x_hidden().child(
                            Label::new(context.summary.clone().unwrap_or(DEFAULT_TAB_TITLE.into()))
                                .size(LabelSize::Small),
                        ),
                    )
                    .child(
                        h_flex()
                            .gap_2()
                            .children(if let Some(host_user) = host_user {
```
</output>
<outline>
```crates/assistant_context_editor/src/context_history.rs
pub enum ContextMetadata
 Remote
 Saved
enum SavedContextPickerEvent
 Confirmed
pub struct ContextHistory
 picker
 _subscriptions
 workspace
impl ContextHistory
 pub fn new
 fn handle_picker_event
impl Render for ContextHistory
 fn render
impl Focusable for ContextHistory
 fn focus_handle
impl EventEmitter<()> for ContextHistory
impl Item for ContextHistory
 type Event
 fn tab_content_text
struct SavedContextPickerDelegate
 store
 project
 matches
 selected_index
impl EventEmitter<SavedContextPickerEvent> for Picker<SavedContextPickerDelegate>
impl SavedContextPickerDelegate
 fn new
impl PickerDelegate for SavedContextPickerDelegate
 type ListItem
 fn match_count
 fn selected_index
 fn set_selected_index
 fn placeholder_text
 fn update_matches
 fn confirm
 fn dismissed
 fn render_match
```

</outline>
<rejected>
```crates/assistant_context_editor/src/context_history.rs
    fn set_selected_index(&mut self, ix: usize, _cx: &mut ModelContext<Picker<Self>>) {
        self.selected_index = ix;
    }

    fn placeholder_text(&self, _window: &mut Window, _cx: &mut AppContext) -> Arc<str> {
        "Search...".into()
    }

    fn update_matches(&mut self, query: String, cx: &mut ModelContext<Picker<Self>>) -> Task<()> {
        let search = self.store.read(cx).search(query, cx);
        cx.spawn(|this, mut cx| async move {
            let matches = search.await;
            this.update(&mut cx, |this, cx| {
                let host_contexts = this.delegate.store.read(cx).host_contexts();
                this.delegate.matches = host_contexts
                    .iter()
                    .cloned()
                    .map(ContextMetadata::Remote)
                    .chain(matches.into_iter().map(ContextMetadata::Saved))
                    .collect();
                this.delegate.selected_index = 0;
                cx.notify();
            })
            .ok();
        })
    }

<|editable_region_start|>
    fn confirm(&mut self, _secondary: bool, cx: &mut ModelContext<Picker<Self>>) {
        if let Some(metadata) = self.matches.get(self.selected_index) {
            cx.emit(SavedContextPickerEvent::Confirmed(metadata.clone()));
        }
    }
    fn dismissed(&mut self, _cx: &mut ModelContext<Picker<Self>>) {}

    fn render_match(
        &self,
        ix: usize,
        selected: bool,
        cx: &mut ModelContext<Picker<Self>>,
    ) -> Option<Self::ListItem> {
        let context = self.matches.get(ix)?;
        let item = match context {
            ContextMetadata::Remote(context) => {
                let host_user = self.project.read(cx).host().and_then(|collaborator| {
                    self.project
                        .read(cx)
                        .user_store()
                        .read(cx)
                        .get_cached_user(collaborator.user_id)
                });
                div()
                    .flex()
                    .w_full()
                    .justify_between()
                    .gap_2()
<|editable_region_end|>
                    .child(
                        h_flex().flex_1().overflow_x_hidden().child(
                            Label::new(context.summary.clone().unwrap_or(DEFAULT_TAB_TITLE.into()))
                                .size(LabelSize::Small),
                        ),
                    )
                    .child(
                        h_flex()
                            .gap_2()
                            .children(if let Some(host_user) = host_user {
```
</rejected>

<labels>
complete-pattern,non-local-edit
</labels>
