<events>
User edited "crates/vim/src/normal/paste.rs":
```diff
@@ -732,6 +732,7 @@
             Mode::Normal,
         );
         cx.simulate_keystrokes("4 g l w escape d i w 0 shift-p");
+        cx.a
         cx.assert_state(
             indoc! {"
                onˇefish•

```
</events>
<input>
```zed/crates/vim/src/normal/paste.rs
        cx.simulate_shared_keystrokes("\" \" d ^").await;
        cx.shared_register('0').await.assert_eq("the ");
        cx.shared_register('"').await.assert_eq("the ");

        cx.simulate_shared_keystrokes("^ \" + d $").await;
        cx.shared_clipboard().await.assert_eq("lazy dog");
        cx.shared_register('"').await.assert_eq("lazy dog");

        cx.simulate_shared_keystrokes("/ d o g enter").await;
        cx.shared_register('/').await.assert_eq("dog");
        cx.simulate_shared_keystrokes("\" / shift-p").await;
        cx.shared_state().await.assert_eq(indoc! {"
                The quick brown
                doˇg"});

        // not testing nvim as it doesn't have a filename
        cx.simulate_keystrokes("\" % p");
        #[cfg(not(target_os = "windows"))]
        cx.assert_state(
            indoc! {"
                    The quick brown
                    dogdir/file.rˇs"},
<|editable_region_start|>
            Mode::Normal,
        );
        #[cfg(target_os = "windows")]
        cx.assert_state(
            indoc! {"
                    The quick brown
                    dogdir\\file.rˇs"},
            Mode::Normal,
        );
    }

    #[gpui::test]
    async fn test_multicursor_paste(cx: &mut gpui::TestAppContext) {
        let mut cx = VimTestContext::new(cx, true).await;

        cx.update_global(|store: &mut SettingsStore, cx| {
            store.update_user_settings::<VimSettings>(cx, |s| {
                s.use_system_clipboard = Some(UseSystemClipboard::Never)
            });
        });

        cx.set_state(
            indoc! {"
               ˇfish one
               fish two
               fish red
               fish blue
                "},
            Mode::Normal,
        );
        cx.simulate_keystrokes("4 g l w escape d i w 0 shift-p");
        cx.<|user_cursor_is_here|>a
        cx.assert_state(
            indoc! {"
               onˇefish•
               twˇofish•
               reˇdfish•
               bluˇefish•
                "},
<|editable_region_end|>
            Mode::Normal,
        );
    }
}

```
</input>
<output>
```zed/crates/vim/src/normal/paste.rs
        cx.simulate_shared_keystrokes("\" \" d ^").await;
        cx.shared_register('0').await.assert_eq("the ");
        cx.shared_register('"').await.assert_eq("the ");

        cx.simulate_shared_keystrokes("^ \" + d $").await;
        cx.shared_clipboard().await.assert_eq("lazy dog");
        cx.shared_register('"').await.assert_eq("lazy dog");

        cx.simulate_shared_keystrokes("/ d o g enter").await;
        cx.shared_register('/').await.assert_eq("dog");
        cx.simulate_shared_keystrokes("\" / shift-p").await;
        cx.shared_state().await.assert_eq(indoc! {"
                The quick brown
                doˇg"});

        // not testing nvim as it doesn't have a filename
        cx.simulate_keystrokes("\" % p");
        #[cfg(not(target_os = "windows"))]
        cx.assert_state(
            indoc! {"
                    The quick brown
                    dogdir/file.rˇs"},
<|editable_region_start|>
            Mode::Normal,
        );
        #[cfg(target_os = "windows")]
        cx.assert_state(
            indoc! {"
                    The quick brown
                    dogdir\\file.rˇs"},
            Mode::Normal,
        );
    }

    #[gpui::test]
    async fn test_multicursor_paste(cx: &mut gpui::TestAppContext) {
        let mut cx = VimTestContext::new(cx, true).await;

        cx.update_global(|store: &mut SettingsStore, cx| {
            store.update_user_settings::<VimSettings>(cx, |s| {
                s.use_system_clipboard = Some(UseSystemClipboard::Never)
            });
        });

        cx.set_state(
            indoc! {"
               ˇfish one
               fish two
               fish red
               fish blue
                "},
            Mode::Normal,
        );
        cx.simulate_keystrokes("4 g l w escape d i w 0 shift-p");
        cx.assert_state();
        cx.assert_state(
            indoc! {"
               onˇefish•
               twˇofish•
               reˇdfish•
               bluˇefish•
                "},
<|editable_region_end|>
            Mode::Normal,
        );
    }
}

```
</output>
<outline>
```crates/vim/src/normal/paste.rs
pub struct Paste
 before
 preserve_clipboard
impl Vim
 pub fn paste
mod test
 async fn test_paste
 async fn test_yank_system_clipboard_never
 async fn test_yank_system_clipboard_on_yank
 async fn test_paste_visual
 async fn test_paste_visual_block
 async fn test_paste_indent
 async fn test_paste_count
 async fn test_numbered_registers
 async fn test_named_registers
 async fn test_special_registers
 async fn test_multicursor_paste
```

</outline>
<rejected>
```zed/crates/vim/src/normal/paste.rs
        cx.simulate_shared_keystrokes("\" \" d ^").await;
        cx.shared_register('0').await.assert_eq("the ");
        cx.shared_register('"').await.assert_eq("the ");

        cx.simulate_shared_keystrokes("^ \" + d $").await;
        cx.shared_clipboard().await.assert_eq("lazy dog");
        cx.shared_register('"').await.assert_eq("lazy dog");

        cx.simulate_shared_keystrokes("/ d o g enter").await;
        cx.shared_register('/').await.assert_eq("dog");
        cx.simulate_shared_keystrokes("\" / shift-p").await;
        cx.shared_state().await.assert_eq(indoc! {"
                The quick brown
                doˇg"});

        // not testing nvim as it doesn't have a filename
        cx.simulate_keystrokes("\" % p");
        #[cfg(not(target_os = "windows"))]
        cx.assert_state(
            indoc! {"
                    The quick brown
                    dogdir/file.rˇs"},
<|editable_region_start|>
            Mode::Normal,
        );
        #[cfg(target_os = "windows")]
        cx.assert_state(
            indoc! {"
                    The quick brown
                    dogdir\\file.rˇs"},
            Mode::Normal,
        );
    }

    #[gpui::test]
    async fn test_multicursor_paste(cx: &mut gpui::TestAppContext) {
        let mut cx = VimTestContext::new(cx, true).await;

        cx.update_global(|store: &mut SettingsStore, cx| {
            store.update_user_settings::<VimSettings>(cx, |s| {
                s.use_system_clipboard = Some(UseSystemClipboard::Never)
            });
        });

        cx.set_state(
            indoc! {"
               ˇfish one
               fish two
               fish red
               fish blue
                "},
            Mode::Normal,
        );
        cx.simulate_keystrokes("4 g l w escape d i w 0 shift-p");
        cx.assert_state(
            indoc! {"
               onˇefish•
               twˇofish•
               reˇdfish•
               bluˇefish•
                "},
<|editable_region_end|>
            Mode::Normal,
        );
    }
}

```
</rejected>

<labels>
local-edit,complete-pattern
</labels>
