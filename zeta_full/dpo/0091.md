<events>
User edited ".github/workflows/deploy.yml":
```diff
@@ -28,7 +28,7 @@
         with:
           node-version-file: './.nvmrc'
 
-  
+    
       # envchain balsamiq-aws-srlinternal aws iam create-service-linked-role --aws-service-name es.amazonaws.com
       # ðŸ‘† if it fails with `An error occurred (InvalidInput) when calling the CreateServiceLinkedRole operation: Service role name AWSServiceRoleForAmazonElasticsearchService has been taken in this account, please try a different suffix.` you're good. This means the service role was already created.
       #

```

User edited ".github/workflows/deploy.yml":
```diff
@@ -28,7 +28,7 @@
         with:
           node-version-file: './.nvmrc'
 
-    
+      #
       # envchain balsamiq-aws-srlinternal aws iam create-service-linked-role --aws-service-name es.amazonaws.com
       # ðŸ‘† if it fails with `An error occurred (InvalidInput) when calling the CreateServiceLinkedRole operation: Service role name AWSServiceRoleForAmazonElasticsearchService has been taken in this account, please try a different suffix.` you're good. This means the service role was already created.
       #

```
</events>
<input>
```.github/workflows/deploy.yml
<|start_of_file|>
on:
  push:
    branches:
      - release
      - staging

  workflow_dispatch:
    inputs:
      branchName:
        description: 'Type name of the branch selected above to confirm (e.g., "staging")'
<|editable_region_start|>
        required: true

jobs:
  deploy:
    # When triggered manually, run this job only if user consciously confirms the branch name they've selected from the dropdown
    if: ${{ github.event_name != 'workflow_dispatch' || github.ref == format('refs/heads/{0}', github.event.inputs.branchName) }}

    runs-on: ubuntu-latest
    env:
      AWS_LLC_ACCESS_KEY_ID: ${{ secrets.AWS_LLC_ACCESS_KEY_ID }}
      AWS_LLC_SECRET_ACCESS_KEY: ${{ secrets.AWS_LLC_SECRET_ACCESS_KEY }}
      CONVOX_RACK_PRODUCTION_PASSWORD: ${{ secrets.CONVOX_RACK_PRODUCTION_PASSWORD }}
      CONVOX_RACK_STAGING_PASSWORD: ${{ secrets.CONVOX_RACK_STAGING_PASSWORD }}
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version-file: './.nvmrc'

      #<|user_cursor_is_here|>
      # envchain balsamiq-aws-srlinternal aws iam create-service-linked-role --aws-service-name es.amazonaws.com
      # ðŸ‘† if it fails with `An error occurred (InvalidInput) when calling the CreateServiceLinkedRole operation: Service role name AWSServiceRoleForAmazonElasticsearchService has been taken in this account, please try a different suffix.` you're good. This means the service role was already created.
      #
      #
      # ( cd lbc/src/lambda/ && nvm exec npm run build ) && ( cd lbc/infrastructure/ && nvm exec envchain balsamiq-aws-srlinternal bin/cli deploy staging new && nvm exec envchain balsamiq-aws-srlinternal bin/cli run staging 'cd ops/ && bin/configure-index-templates' )
<|editable_region_end|>
      - run: script/deploy "${GITHUB_REF:11}"  # 11 comes from offsetting `refs/heads/` prefix

```
</input>
<output>
```.github/workflows/deploy.yml
<|start_of_file|>
on:
  push:
    branches:
      - release
      - staging

  workflow_dispatch:
    inputs:
      branchName:
        description: 'Type name of the branch selected above to confirm (e.g., "staging")'
<|editable_region_start|>
        required: true

jobs:
  deploy:
    # When triggered manually, run this job only if user consciously confirms the branch name they've selected from the dropdown
    if: ${{ github.event_name != 'workflow_dispatch' || github.ref == format('refs/heads/{0}', github.event.inputs.branchName) }}

    runs-on: ubuntu-latest
    env:
      AWS_LLC_ACCESS_KEY_ID: ${{ secrets.AWS_LLC_ACCESS_KEY_ID }}
      AWS_LLC_SECRET_ACCESS_KEY: ${{ secrets.AWS_LLC_SECRET_ACCESS_KEY }}
      CONVOX_RACK_PRODUCTION_PASSWORD: ${{ secrets.CONVOX_RACK_PRODUCTION_PASSWORD }}
      CONVOX_RACK_STAGING_PASSWORD: ${{ secrets.CONVOX_RACK_STAGING_PASSWORD }}
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version-file: './.nvmrc'

      # Create the service role
      # envchain balsamiq-aws-srlinternal aws iam create-service-linked-role --aws-service-name es.amazonaws.com
      # ðŸ‘† if it fails with `An error occurred (InvalidInput) when calling the CreateServiceLinkedRole operation: Service role name AWSServiceRoleForAmazonElasticsearchService has been taken in this account, please try a different suffix.` you're good. This means the service role was already created.
      #
      #
      # ( cd lbc/src/lambda/ && nvm exec npm run build ) && ( cd lbc/infrastructure/ && nvm exec envchain balsamiq-aws-srlinternal bin/cli deploy staging new && nvm exec envchain balsamiq-aws-srlinternal bin/cli run staging 'cd ops/ && bin/configure-index-templates' )
<|editable_region_end|>
      - run: script/deploy "${GITHUB_REF:11}"  # 11 comes from offsetting `refs/heads/` prefix

```
</output>
<outline>
```.github/workflows/deploy.yml
on
 push
  branches
 workflow_dispatch
  inputs
   branchName
    description
    required
jobs
 deploy
  if
  runs-on
  env
   AWS_LLC_ACCESS_KEY_ID
   AWS_LLC_SECRET_ACCESS_KEY
   CONVOX_RACK_PRODUCTION_PASSWORD
   CONVOX_RACK_STAGING_PASSWORD
  steps
   uses
   uses
   with
    node-version-file
   run
```

</outline>
<rejected>
```.github/workflows/deploy.yml
<|start_of_file|>
on:
  push:
    branches:
      - release
      - staging

  workflow_dispatch:
    inputs:
      branchName:
        description: 'Type name of the branch selected above to confirm (e.g., "staging")'
<|editable_region_start|>
        required: true

jobs:
  deploy:
    # When triggered manually, run this job only if user consciously confirms the branch name they've selected from the dropdown
    if: ${{ github.event_name != 'workflow_dispatch' || github.ref == format('refs/heads/{0}', github.event.inputs.branchName) }}

    runs-on: ubuntu-latest
    env:
      AWS_LLC_ACCESS_KEY_ID: ${{ secrets.AWS_LLC_ACCESS_KEY_ID }}
      AWS_LLC_SECRET_ACCESS_KEY: ${{ secrets.AWS_LLC_SECRET_ACCESS_KEY }}
      CONVOX_RACK_PRODUCTION_PASSWORD: ${{ secrets.CONVOX_RACK_PRODUCTION_PASSWORD }}
      CONVOX_RACK_STAGING_PASSWORD: ${{ secrets.CONVOX_RACK_STAGING_PASSWORD }}
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version-file: './.nvmrc'

      # envchain balsamiq-aws-srlinternal aws iam create-service-linked-role --aws-service-name es.amazonaws.com
      # ðŸ‘† if it fails with `An error occurred (InvalidInput) when calling the CreateServiceLinkedRole operation: Service role name AWSServiceRoleForAmazonElasticsearchService has been taken in this account, please try a different suffix.` you're good. This means the service role was already created.
      #
      #
      # ( cd lbc/src/lambda/ && nvm exec npm run build ) && ( cd lbc/infrastructure/ && nvm exec envchain balsamiq-aws-srlinternal bin/cli deploy staging new && nvm exec envchain balsamiq-aws-srlinternal bin/cli run staging 'cd ops/ && bin/configure-index-templates' )
<|editable_region_end|>
      - run: script/deploy "${GITHUB_REF:11}"  # 11 comes from offsetting `refs/heads/` prefix

```
</rejected>

<labels>
local-edit,complete-pattern
</labels>
