<events>

</events>
<input>
```fs-tree/src/macros.rs
<|start_of_file|>
//! Macros for declaring a [`FsTree`](crate::FsTree).

/// Macro for declaring a [`FsTree`](crate::FsTree) literal.
<|editable_region_start|>
///
/// # Syntax:
///
/// - `name` is a regular file.
/// - `name: { ... }` is a directory.
/// - `name -> name` is a symlink.
/// - Commas are (unfortunately) not supported.
/// - Use quotes (`"name"`) for spaces, dots, etc.
///
/// # Examples:
///
/// ```
/// use fs_tree::{FsTree, tree, TrieMap};
///
/// let result = tree! {
///     file1
///     outer_dir: {
///         file2
///         inner_dir: {
///             file3
///         }
///         link1 -> target
///         link2 -> "/home/username/.gitconfig"
///     }
/// };
///
/// let expected = FsTree::Directory(TrieMap::from([
///     ("file1".into(), FsTree::Regular),
///     ("outer_dir".into(), FsTree::Directory(TrieMap::from([
///         ("file2".into(), FsTree::Regular),
///         ("inner_dir".into(), FsTree::Directory(TrieMap::from([
///             ("file3".into(), FsTree::Regular),
///         ]))),
///         ("link1".into(), FsTree::Symlink("target".into())),
///         ("link2".into(), FsTree::Symlink("/home/username/.gitconfig".into())),
///     ]))),
/// ]));
///
/// assert_eq!(result, expected);
//<|user_cursor_is_here|>/ ```
#[macro_export]
macro_rules! tree {
    ($($all:tt)+) => {{
        let mut trie = $crate::TrieMap::new();
        $crate::trees_internal!(trie $($all)*);
        $crate::FsTree::Directory(trie)
    }};
}

#[doc(hidden)]
#[macro_export]
macro_rules! trees_internal {
    // Base case
    ($parent_trie:ident) => {};
    // Directory
    ($parent_trie:ident $path:ident : { $($inner:tt)* } $($rest:tt)*) => {
        #[allow(unused_mut)]
        let mut trie = $crate::TrieMap::new();
        $crate::trees_internal!(trie $($inner)*);
        $parent_trie.insert(
<|editable_region_end|>
            ::std::path::PathBuf::from(stringify!($path)),
            $crate::FsTree::Directory(trie)
        );
```
</input>
<output>
```fs-tree/src/macros.rs
<|start_of_file|>
//! Macros for declaring a [`FsTree`](crate::FsTree).

/// Macro for declaring a [`FsTree`](crate::FsTree) literal.
<|editable_region_start|>
///
/// # Syntax:
///
/// - `name` is a regular file.
/// - `name: { ... }` is a directory.
/// - `name -> name` is a symlink.
/// - Commas are (unfortunately) not supported.
/// - Use quotes (`"name"`) for spaces, dots, etc.
///
/// # Examples:
///
/// ```
/// use fs_tree::{FsTree, tree, TrieMap};
///
/// let result = tree! {
///     file1
///     outer_dir: {
///         file2
///         inner_dir: {
///             file3
///         }
///         link1 -> target
///         link2 -> "/home/username/.gitconfig"
///     }
/// };
///
/// let expected = FsTree::Directory(TrieMap::from([
///     ("file1".into(), FsTree::Regular),
///     ("outer_dir".into(), FsTree::Directory(TrieMap::from([
///         ("file2".into(), FsTree::Regular),
///         ("inner_dir".into(), FsTree::Directory(TrieMap::from([
///             ("file3".into(), FsTree::Regular),
///         ]))),
///         ("link1".into(), FsTree::Symlink("target".into())),
///         ("link2".into(), FsTree::Symlink("/home/username/.gitconfig".into())),
///     ]))),
/// ]));
///
/// assert_eq!(result, expected);
/// ```
#[macro_export]
macro_rules! tree {
    ($($all:tt)+) => {{
        let mut trie = $crate::TrieMap::new();
        $crate::trees_internal!(trie $($all)*);
        $crate::FsTree::Directory(trie)
    }};
}

#[doc(hidden)]
#[macro_export]
macro_rules! trees_internal {
    // Base case
    ($parent_trie:ident) => {};
    // Directory
    ($parent_trie:ident $path:ident : { $($inner:tt)* } $($rest:tt)*) => {
        #[allow(unused_mut)]
        let mut trie = $crate::TrieMap::new();
        $crate::trees_internal!(trie $($inner)*);
        $parent_trie.insert(
<|editable_region_end|>
            ::std::path::PathBuf::from(stringify!($path)),
            $crate::FsTree::Directory(trie)
        );
```
</output>
<outline>
```src/macros.rs
macro_rules! tree
macro_rules! trees_internal
mod tests
 fn test_macro_compiles_with_literals_and_idents
 fn test_tree_macro_single_regular_file
 fn test_tree_macro_empty_directory
 fn test_tree_macro_single_symlink
 fn test_tree_macro_nested_directories
 fn test_tree_macro_mixed_types
 fn test_tree_macro_big_example
```

</outline>
<rejected>
```fs-tree/src/macros.rs
<|start_of_file|>
//! Macros for declaring a [`FsTree`](crate::FsTree).

/// Macro for declaring a [`FsTree`](crate::FsTree) literal.
<|editable_region_start|>
///
/// # Syntax:
///
/// - `name` is a regular file.
/// - `name: { ... }` is a directory.
/// - `name -> name` is a symlink.
/// - Commas are (unfortunately) not supported.
/// - Use quotes (`"name"`) for spaces, dots, etc.
///
/// # Examples:
///
/// ```
/// use fs_tree::{FsTree, tree, TrieMap};
///
/// let result = tree! {
///     file1
///     outer_dir: {
///         file2
///         inner_dir: {
///             file3
///         }
///         link1 -> target
///         link2 -> "/home/username/.gitconfig"
///     }
/// };
///
/// let expected = FsTree::Directory(TrieMap::from([
///     ("file1".into(), FsTree::Regular),
///     ("outer_dir".into(), FsTree::Directory(TrieMap::from([
///         ("file2".into(), FsTree::Regular),
///         ("inner_dir".into(), FsTree::Directory(TrieMap::from([
///             ("file3".into(), FsTree::Regular),
///         ]))),
///         ("link1".into(), FsTree::Symlink("target".into())),
///         ("link2".into(), FsTree::Symlink("/home/username/.gitconfig".into())),
///     ]))),
/// ]));
///
/// assert_eq!(result, expected);
//<|editable_region_end|>
            ::std::path::PathBuf::from(stringify!($path)),
            $crate::FsTree::Directory(trie)
        );
```
</rejected>

<labels>
local-edit,complete-pattern
</labels>
